!function(t,e){t.fn.fortuneWheel=function(r){var n={ua:e.navigator.userAgent.toLowerCase(),isAndroid:function(){return n.ua.indexOf("android")>-1},isIOS:function(){var t=n.ua.match(/(ipad|iphone|ipod)/g)?!0:!1;return t},isOldAndroid:function(){return n.ua.indexOf("android 2.")>-1},isProblematic:function(){return n.isIOS()||n.isOldAndroid()}},a=[],i=function(e,r){function a(e){return"rtl"==t(e).css("direction").toLowerCase()}function i(){var n=null;return null!=r.placeholder&&(n=t(r.placeholder)),n&&0!=n.length||(n=t("<div />"),t(e).before(n)),n.html("").addClass(r.placeholderClass),n}function l(e){return t(e>=0&&e<g.length?g[e]:null)}function s(){t(g).each(function(){var e=t.trim(t(this).val()).replace(/\s/g,"").length,n=parseInt(t(this).attr("maxlength"));t(this).toggleClass(r.filledClass,e>=n)}),d.isFull()?(e.trigger(r.eventFull),"function"==typeof r.full&&r.full(d.getValue())):(e.trigger(r.eventNotFull),"function"==typeof r.partial&&r.partial(d.getValue()))}function o(){if(t(g).change(function(){e.val(d.getValue()),s()}).keyup(function(){s()}),n.isOldAndroid()||t(g).keydown(function(e){var i=a(t(this)),s=t(this).data("pos"),o=l(s+1),u=l(s-1);switch(e.keyCode){case 46:if(option.byWords)break;return r.allowBlanks&&t(this).val("").trigger("change"),!1;case 8:if(n.isProblematic())return!0;var h=t(this).val();return r.allowBlanks&&t(this).val(h.substring(0,h.length-1)).trigger("change"),h.length-1<=0&&u.focus(),!1;case 32:if(r.byWords)break;return r.allowBlanks&&(t(this).val(" ").trigger("change"),o.focus()),!1;case 37:return r.byWords?!0:((i?o:u).focus(),!1);case 39:return r.byWords?!0:((i?u:o).focus(),!1)}}).on(n.isAndroid()?"input":"keypress",function(e){var a=t(this).data("pos"),i=l(a+1),s=e.keyCode||e.which||0,o=String.fromCharCode(s),u=t(this).val().length,h=parseInt(t(this).attr("maxlength"));return r.allowNumbers||isNaN(o)?r.restrict&&0!=s&&!new RegExp("["+r.restrict+"]").test(o)?!1:(""!=o&&0!=s&&(r.byWords?t(this).val((t(this).val()+o).substring(0,h)).trigger("change"):t(this).val(o).trigger("change")),u=t(this).val().length,n.isProblematic()||0!=i.length||!r.blurOnLastChar&&0!=s?(n.isAndroid()&&t(this).val(t(this).val().substring(0,h)),n.isAndroid()&&""!=i.val()?t(this).blur():u>=h&&!n.isProblematic()&&i.focus()):t(this).blur(),0!=s?!1:void 0):!1}),n.isAndroid()&&!n.isOldAndroid()&&g.focus(function(){t(this).val("").trigger("change")}),!r.allowBlanks){var i="focus"+Math.floor(1e5*Math.random());t(g).focus(function(){return""!=t(this).val()||t(this).hasClass(i)?(t(this).removeClass(i),!0):void t(g).each(function(){return""==t(this).val()?(t(this).addClass(i).focus(),!1):void 0})})}}function u(){var n=[];return n=r.pattern.length>0?r.pattern:t(e).data("pattern"),"object"==typeof n?n:n.toString().split(",")}function h(){var n=!!r.byWords;f.html();var i=u(),l=null;for(var h in i)if(!isNaN(i[h])){for(var c=n?1:i[h],d=0;c>d;d++){var v=n?"word":"char",p=n?i[h]:1;l=t('<input type="text" data-pos="'+g.length+'" maxlength="'+p+'" class="'+v+'" />'),r.showCaretSymbol||l.attr("readonly","readonly"),f.append(l),l.css({height:r.charSize,width:r.charSize*p,lineHeight:r.charSize+"px"}),g.push(l)}h<i.length&&null!=l&&l.addClass(r.spaceClass).css(a(f)?"margin-left":"margin-right",r.wordSpace)}g=t(g).map(function(){return this.toArray()}),o(),r.hideElem&&e.hide(),s()}var c={placeholder:null,pattern:[],hideElem:!0,wordSpace:15,spaceClass:"word-space",showCaretSymbol:!0,placeholderClass:"fortune-wheel",allowNumbers:!1,trimValue:!0,allowBlanks:!0,restrict:null,blurOnLastChar:!1,byWords:!1,charSize:30,filledClass:"filled",eventFull:"change-full",eventNotFull:"change-not-full",full:function(){},partial:function(){}},d=this,f=null,g=[];this.isFull=function(){var e=!0;return g.each(function(){var r=t.trim(t(this).val()),n=t(this).attr("maxlength");return r.length<n?(e=!1,!1):void 0}),e},this.getValue=function(){var e="";return g.each(function(){var n=t(this).val();e+=""==n?" ":n,t(this).hasClass(r.spaceClass)&&(e+=" ")}),r.trimValue?t.trim(e):e},r=t.extend(c,r),n.isProblematic()&&(r.byWords=!0),f=i(),h()};return t(this).filter("input[type=text]").each(function(){a.push(new i(t(this),r))}),this}}(jQuery,window,document);