/**
 * Wheel of Fortune like input jQuery Plugin
 * Author: Yaron Uliel
 * Copyright: 2014 Social It Tech Marketing
 */
(function(b,a,c){b.fn.fortuneWheel=function(e){var f=[];var d=function(j,s){var k={placeholder:null,pattern:[],hideElem:true,wordSpace:15,spaceClass:"word-space",showCaretSymbol:false,placeholderClass:"fortune-wheel",allowNumbers:false,trimValue:true,allowBlanks:true,restrict:null,blurOnLastChar:false,eventFull:"change-full",eventNotFull:"change-not-full",full:function(t){},partial:function(t){}};var q=this;var p=null;var o=[];this.isFull=function(){var t=true;o.each(function(){var u=b(this).val();
if(b.trim(u)==""){t=false;return false}});return t};this.getValue=function(){var t="";o.each(function(){var u=b(this).val();t+=(u==""?" ":u);if(b(this).hasClass(s.spaceClass)){t+=" "}});return s.trimValue?b.trim(t):t};function h(t){return b(t).css("direction").toLowerCase()=="rtl"}function g(){var t=null;if(s.placeholder!=null){t=b(s.placeholder)}if(!t||t.length==0){t=b("<div />");b(j).before(t)}t.html("").addClass(s.placeholderClass);return t}function i(t){return b(t>=0&&t<o.length?o[t]:null)}function l(){if(q.isFull()){j.trigger(s.eventFull);
if(typeof(s.full)=="function"){s.full(q.getValue())}}else{j.trigger(s.eventNotFull);if(typeof(s.partial)=="function"){s.partial(q.getValue())}}}function n(){b(o).change(function(){j.val(q.getValue());l()}).keydown(function(x){var w=h(b(this));var y=b(this).data("pos");var u=i(y+1);var v=i(y-1);switch(x.keyCode){case 46:if(s.allowBlanks){b(this).val("").trigger("change")}return false;case 8:if(s.allowBlanks){b(this).val("").trigger("change")}v.focus();return false;case 32:if(s.allowBlanks){b(this).val(" ").trigger("change");
u.focus()}return false;case 37:(w?u:v).focus();return false;case 39:(w?v:u).focus();return false}}).keypress(function(w){var x=b(this).data("pos");var v=i(x+1);var u=String.fromCharCode(w.which);if(!s.allowNumbers&&!isNaN(u)){return false}if(s.restrict&&!(new RegExp("["+s.restrict+"]")).test(u)){console.log("restricted");return false}if(u!=""){b(this).val(u).trigger("change")}if(v.length==0&&s.blurOnLastChar){b(this).blur()}else{v.focus()}return false});if(!s.allowBlanks){var t="focus"+(Math.floor(Math.random()*100000));
b(o).focus(function(u){if(b(this).val()!=""||b(this).hasClass(t)){b(this).removeClass("focusing");return true}else{b(o).each(function(){if(b(this).val()==""){b(this).addClass(t).focus();return false}})}})}}function m(){var t=[];if(s.pattern.length>0){t=s.pattern}else{t=b(j).data("pattern")}if(typeof(t)=="object"){return t}else{return t.toString().split(",")}}function r(){p.html();var w=m();var t=null;for(var v in w){if(isNaN(w[v])){continue}for(var u=0;u<w[v];u++){t=b('<input type="text" data-pos="'+(o.length)+'" maxlength="1" class="char t" />');
if(!s.showCaretSymbol){t.attr("readonly","readonly")}p.append(t);o.push(t)}if(v<w.length&&t!=null){t.addClass(s.spaceClass).css((h(p)?"margin-left":"margin-right"),s.wordSpace)}}o=b(o).map(function(){return this.toArray()});n();if(s.hideElem){j.hide()}l()}s=b.extend(k,s);p=g();r()};b(this).filter("input[type=text]").each(function(){f.push(new d(b(this),e))});return this}})(jQuery,window,document);